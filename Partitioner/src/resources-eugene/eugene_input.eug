PartType promoter;
PartType cds;
PartType rbs;
PartType ribozyme;
PartType terminator;

promoter pTac(.SEQUENCE("AACGATCGTTGGCTGTGTTGACAATTAATCATCGGCTCGTATAATGTGTGGAATTGTGAGCGCTCACAATT"));
ribozyme RiboJ53(.SEQUENCE("CTGAAGCGGTCAACGCATGTGCTTTGCGTTCTGATGAGACAGTGATGTCGAAACCGCCTCTACAAATAATTTTGTTTAA"));
ribozyme RiboJ10(.SEQUENCE("CTGAAGCGCTCAACGGGTGTGCTTCCCGTTCTGATGAGTCCGTGAGGACGAAAGCGCCTCTACAAATAATTTTGTTTAA"));
promoter pAmtR(.SEQUENCE("CTTGTCCAACCAAATgattcgttaccctttgacagTTTCTATCGATCTATAGATAATgctagc"));
rbs S2(.SEQUENCE("CTATGGACTATGTTTTCACACAGGAAATACCAGG"));
rbs A1(.SEQUENCE("AATGTTCCCTAATAATCAGCAAAGAGGTTACTAG"));
cds AmtR(.SEQUENCE("ATGGCAGGCGCAGTTGGTCGTCCGCGTCGTAGTGCACCGCGTCGTGCAGGTAAAAATCCGCGTGAAGAAATTCTGGATGCAAGCGCAGAACTGTTTACCCGTCAGGGTTTTGCAACCACCAGTACCCATCAGATTGCAGATGCAGTTGGTATTCGTCAGGCAAGCCTGTATTATCATTTTCCGAGCAAAACCGAAATCTTTCTGACCCTGCTGAAAAGCACCGTTGAACCGAGCACCGTTCTGGCAGAAGATCTGAGCACCCTGGATGCAGGTCCGGAAATGCGTCTGTGGGCAATTGTTGCAAGCGAAGTTCGTCTGCTGCTGAGCACCAAATGGAATGTTGGTCGTCTGTATCAGCTGCCGATTGTTGGTAGCGAAGAATTTGCAGAATATCATAGCCAGCGTGAAGCACTGACCAATGTTTTTCGTGATCTGGCAACCGAAATTGTTGGTGATGATCCGCGTGCAGAACTGCCGTTTCATATTACCATGAGCGTTATTGAAATGCGTCGCAATGATGGTAAAATTCCGAGTCCGCTGAGCGCAGATAGCCTGCCGGAAACCGCAATTATGCTGGCAGATGCAAGCCTGGCAGTTCTGGGTGCACCGCTGCCTGCAGATCGTGTTGAAAAAACCCTGGAACTGATTAAACAGGCAGATGCAAAATAATAA"));
promoter pSrpR(.SEQUENCE("TCTATGATTGGTCCAgattcgttaccaattgacagctagctcagtcctaggtATATACATACATGCTTGTTTGTTTGTAAAC"));
cds PhlF(.SEQUENCE("ATGGCACGTACCCCGAGCCGTAGCAGCATTGGTAGCCTGCGTAGTCCGCATACCCATAAAGCAATTCTGACCAGCACCATTGAAATCCTGAAAGAATGTGGTTATAGCGGTCTGAGCATTGAAAGCGTTGCACGTCGTGCCGGTGCAAGCAAACCGACCATTTATCGTTGGTGGACCAATAAAGCAGCACTGATTGCCGAAGTGTATGAAAATGAAAGCGAACAGGTGCGTAAATTTCCGGATCTGGGTAGCTTTAAAGCCGATCTGGATTTTCTGCTGCGTAATCTGTGGAAAGTTTGGCGTGAAACCATTTGTGGTGAAGCATTTCGTTGTGTTATTGCAGAAGCACAGCTGGACCCTGCAACCCTGACCCAGCTGAAAGATCAGTTTATGGAACGTCGTCGTGAGATGCCGAAAAAACTGGTTGAAAATGCCATTAGCAATGGTGAACTGCCGAAAGATACCAATCGTGAACTGCTGCTGGATATGATTTTTGGTTTTTGTTGGTATCGCCTGCTGACCGAACAGCTGACCGTTGAACAGGATATTGAAGAATTTACCTTCCTGCTGATTAATGGTGTTTGTCCGGGTACACAGCGTTAATAA"));
terminator L3S2P55(.SEQUENCE("CTCGGTACCAAAGACGAACAATAAGACGCTGAAAAGCGTCTTTTTTCGTTTTGGTCC"));
ribozyme BydvJ(.SEQUENCE("CTGAagGGTGTCTCAAGGTGCGTACCTTGACTGATGAGTCCGAAAGGACGAAACACCcctctacaaataattttgtttaa"));
promoter pTet(.SEQUENCE("TACTCCACCGTTGGCTTTTTTCCCTATCAGTGATAGAGATTGACATCCCTATCAGTGATAGAGATAATGAGCAC"));
cds SrpR(.SEQUENCE("ATGGCACGTAAAACCGCAGCAGAAGCAGAAGAAACCCGTCAGCGTATTATTGATGCAGCACTGGAAGTTTTTGTTGCACAGGGTGTTAGTGATGCAACCCTGGATCAGATTGCACGTAAAGCCGGTGTTACCCGTGGTGCAGTTTATTGGCATTTTAATGGTAAACTGGAAGTTCTGCAGGCAGTTCTGGCAAGCCGTCAGCATCCGCTGGAACTGGATTTTACACCGGATCTGGGTATTGAACGTAGCTGGGAAGCAGTTGTTGTTGCAATGCTGGATGCAGTTCATAGTCCGCAGAGCAAACAGTTTAGCGAAATTCTGATTTATCAGGGTCTGGATGAAAGCGGTCTGATTCATAATCGTATGGTTCAGGCAAGCGATCGTTTTCTGCAGTATATTCATCAGGTTCTGCGTCATGCAGTTACCCAGGGTGAACTGCCGATTAATCTGGATCTGCAGACCAGCATTGGTGTTTTTAAAGGTCTGATTACCGGTCTGCTGTATGAAGGTCTGCGTAGCAAAGATCAGCAGGCACAGATTATCAAAGTTGCACTGGGTAGCTTTTGGGCACTGCTGCGTGAACCGCCTCGTTTTCTGCTGTGTGAAGAAGCACAGATTAAACAGGTGAAATCCTTCGAATAATAA"));
terminator ECK120033737(.SEQUENCE("GGAAACACAGAAAAAAGCCCGCACCTGACAGTGCGGGCTTTTTTTTTCGACCAAAGG"));
terminator ECK120029600(.SEQUENCE("TTCAGCCAAAAAACTTAAGACCGCCGGTCTTGTCCACTACCTTGCAGTAATGCGGTGGACAGGATCGGCGGTTTTCTTTTCTCTTCTCAA"));
rbs P3(.SEQUENCE("CTTTACGAGGGCGATCCT"));

Device A1_AmtR_device(
   promoter,
   BydvJ,
   A1,
   AmtR,
   L3S2P55
);

Device S2_SrpR_device(
   promoter,
   RiboJ10,
   S2,
   SrpR,
   ECK120029600
);

Device P3_PhlF_device(
   promoter,
   promoter,
   RiboJ53,
   P3,
   PhlF,
   ECK120033737
);


Rule A1_AmtR_rules ( ON A1_AmtR_device:
   CONTAINS pTac AND
   STARTSWITH pTac AND
   ALL_FORWARD
);

Rule S2_SrpR_rules ( ON S2_SrpR_device:
   CONTAINS pTet AND
   ALL_FORWARD
);

Rule P3_PhlF_rules ( ON P3_PhlF_device:
   CONTAINS pAmtR AND
   CONTAINS pSrpR AND
   STARTSWITH pSrpR AND
   ALL_FORWARD
);


A1_AmtR_devices = product(A1_AmtR_device);
S2_SrpR_devices = product(S2_SrpR_device);
P3_PhlF_devices = product(P3_PhlF_device);

Device gate_A1_AmtR();
Device gate_S2_SrpR();
Device gate_P3_PhlF();
Device circuit();

Rule allRules( ON circuit:

   gate_A1_AmtR EXACTLY 1 AND
   gate_S2_SrpR EXACTLY 1 AND
   gate_P3_PhlF EXACTLY 1 AND
   ALL_FORWARD
);

Array allResults;

for(num i1=0;  i1<sizeof(A1_AmtR_devices);  i1=i1+1) {
for(num i2=0;  i2<sizeof(S2_SrpR_devices);  i2=i2+1) {
for(num i3=0;  i3<sizeof(P3_PhlF_devices);  i3=i3+1) {

gate_A1_AmtR = A1_AmtR_devices[i1];
gate_S2_SrpR = S2_SrpR_devices[i2];
gate_P3_PhlF = P3_PhlF_devices[i3];

Device circuit(
gate_A1_AmtR,
gate_S2_SrpR,
gate_P3_PhlF
);

result = permute(circuit);

allResults = allResults + result;

}
}
}

